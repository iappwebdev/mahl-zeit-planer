<div class="min-h-screen flex items-center justify-center bg-canvas px-4 py-8">
  <div class="w-full max-w-md bg-surface rounded-2xl shadow-elevated p-8">
    <!-- Branding -->
    <div class="text-center mb-10">
      <div class="text-5xl mb-3">üç¥</div>
      <h1 class="text-3xl font-bold" style="color: var(--brand-primary); letter-spacing: -0.02em;">MahlZeitPlaner</h1>
      <p class="text-sm mt-2" style="color: var(--text-tertiary);">Deine Wochenplanung, einfach gemacht</p>
    </div>

    <!-- Login Form -->
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      <h2 class="text-xl font-semibold mb-6 text-primary">Anmelden</h2>

      <!-- Email Field -->
      <div class="mb-5">
        <label for="email" class="block text-sm font-semibold mb-2 text-secondary">
          E-Mail
        </label>
        <input
          id="email"
          type="email"
          formControlName="email"
          class="w-full px-4 py-3 text-base border rounded-xl focus:outline-none transition-all auth-input"
          [class.border-error]="email?.invalid && email?.touched"
        />
        @if (email?.invalid && email?.touched) {
          <div class="text-sm mt-1.5" style="color: var(--error);">
            @if (email?.errors?.['required']) {
              <p>E-Mail ist erforderlich</p>
            }
            @if (email?.errors?.['email']) {
              <p>Bitte gib eine gueltige E-Mail-Adresse ein</p>
            }
          </div>
        }
      </div>

      <!-- Password Field -->
      <div class="mb-5">
        <label for="password" class="block text-sm font-semibold mb-2 text-secondary">
          Passwort
        </label>
        <input
          id="password"
          type="password"
          formControlName="password"
          class="w-full px-4 py-3 text-base border rounded-xl focus:outline-none transition-all auth-input"
          [class.border-error]="password?.invalid && password?.touched"
        />
        @if (password?.invalid && password?.touched) {
          <div class="text-sm mt-1.5" style="color: var(--error);">
            @if (password?.errors?.['required']) {
              <p>Passwort ist erforderlich</p>
            }
            @if (password?.errors?.['minlength']) {
              <p>Passwort muss mindestens 8 Zeichen lang sein</p>
            }
          </div>
        }
      </div>

      <!-- Forgot Password Link -->
      <div class="mb-6">
        <a routerLink="/passwort-vergessen" class="text-sm font-medium transition-colors" style="color: var(--brand-primary);">
          Passwort vergessen?
        </a>
      </div>

      <!-- Server Error -->
      @if (serverError) {
        <div class="mb-5 p-4 rounded-xl" style="background-color: var(--error-bg); border: 1px solid var(--error);">
          <p class="text-sm font-medium" style="color: var(--error);">{{ serverError }}</p>
        </div>
      }

      <!-- Submit Button -->
      <button
        type="submit"
        [disabled]="loginForm.invalid || isLoading"
        class="w-full py-3.5 text-base font-bold text-white rounded-xl focus:outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed auth-submit"
      >
        @if (isLoading) {
          <span class="inline-flex items-center">
            <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            Wird geladen...
          </span>
        } @else {
          <span>Anmelden</span>
        }
      </button>
    </form>

    <!-- Register Link -->
    <div class="mt-8 text-center">
      <p class="text-base text-secondary">
        Noch kein Konto?
        <a routerLink="/registrieren" class="font-bold ml-1 transition-colors" style="color: var(--brand-primary);">
          Registrieren
        </a>
      </p>
    </div>
  </div>
</div>

<style>
  .auth-input {
    background-color: var(--bg-elevated);
    border-color: var(--border-standard);
    color: var(--text-primary);
  }

  .auth-input:focus {
    border-color: var(--brand-primary);
    box-shadow: 0 0 0 3px var(--brand-subtle);
  }

  .border-error {
    border-color: var(--error) !important;
  }

  .auth-submit {
    background-color: var(--brand-primary);
    box-shadow: var(--shadow-sm);
  }

  .auth-submit:hover:not(:disabled) {
    background-color: var(--brand-hover);
    box-shadow: var(--shadow-md);
  }
</style>
